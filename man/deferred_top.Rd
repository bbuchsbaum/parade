% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/text_ui.R
\name{deferred_top}
\alias{deferred_top}
\title{Live TUI monitor for deferred jobs}
\usage{
deferred_top(
  d,
  refresh = 3,
  nlog = 20,
  clear = TRUE,
  once = FALSE,
  max_rows = 20L
)
}
\arguments{
\item{d}{A \code{parade_deferred} object (from \code{\link[=submit]{submit()}})}

\item{refresh}{Seconds between display updates (default 3)}

\item{nlog}{Number of log lines to show (SLURM only, default 20)}

\item{clear}{Clear screen between updates (default TRUE)}

\item{once}{Single-shot mode: display once and return (default FALSE)}

\item{max_rows}{Maximum chunk rows to display (default 20). Remaining chunks
are summarised in a single line.}
}
\value{
The input deferred object (invisibly)
}
\description{
Displays a live-updating terminal dashboard for a \code{parade_deferred} object.
Adapts to the backend: SLURM gets a rich per-chunk table with metrics and
log tailing; local/crew/mirai get a progress bar with resolved/unresolved counts.
}
\details{
Progress is tracked via index file counting (\code{index-NNNN.rds} in \code{d$index_dir}),
which works across all backends.
}
\examples{
\donttest{
grid <- data.frame(x = 1:6, g = rep(1:3, 2))
fl <- flow(grid) |>
  stage("s", function(x) { Sys.sleep(1); list(y = x^2) },
         schema = returns(y = dbl())) |>
  distribute(dist_local(by = "g"))
d <- submit(fl)
deferred_top(d, refresh = 1, once = TRUE)
}
}
