% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/distribute.R
\name{dist_slurm_allocation}
\alias{dist_slurm_allocation}
\title{Convenience: SLURM distribution from an allocation shape}
\usage{
dist_slurm_allocation(
  nodes,
  cores_per_node,
  by = NULL,
  within = c("multisession", "multicore", "callr", "sequential"),
  template = slurm_template(),
  resources = list(),
  target_jobs = NULL
)
}
\arguments{
\item{nodes}{Integer; number of nodes available concurrently.}

\item{cores_per_node}{Integer; number of CPU cores per node.}

\item{by}{Optional column names to group by for parallelization.}

\item{within}{Execution strategy within each SLURM job: "multisession",
"multicore", "callr", or "sequential".}

\item{template}{Path to SLURM template file.}

\item{resources}{Named list of SLURM resource specifications (merged with the
full-node defaults; user values win).}

\item{target_jobs}{Optional integer; override the default \code{target_jobs = nodes}
(useful for oversubscription, e.g., \code{target_jobs = nodes * 2}).}
}
\value{
A \code{parade_dist} object suitable for \code{distribute()}.
}
\description{
If you have an allocation like "10 nodes Ã— 196 cores", this helper creates a
\code{dist_slurm()} specification that:
}
\details{
\itemize{
\item requests one node per SLURM job with \code{cpus_per_task = cores_per_node},
\item uses \code{target_jobs = nodes} so \code{submit()} creates (approximately) one job per
node (optionally oversubscribed if you pass a larger \code{nodes}),
\item sets \code{workers_within = cores_per_node} by default when using within-job
parallelism.
}

This is still static partitioning at submit time; for highly heterogeneous
task durations, consider oversubscribing (\code{target_jobs > nodes}) or using a
dispatcher backend (e.g., \code{dist_mirai()} with dispatcher or \code{dist_crew()} with
a cluster controller).
}
\examples{
\donttest{
# Treat an allocation like "one big machine" (best-effort)
dist_slurm_allocation(nodes = 10, cores_per_node = 196, within = "multicore")

# Oversubscribe to reduce stragglers
dist_slurm_allocation(
  nodes = 10,
  cores_per_node = 196,
  within = "multicore",
  target_jobs = 20
)
}
}
