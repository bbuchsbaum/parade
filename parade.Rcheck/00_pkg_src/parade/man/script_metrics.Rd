% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/slurm_stats.R
\name{script_metrics}
\alias{script_metrics}
\title{Get CPU and memory metrics for a SLURM job}
\usage{
script_metrics(job)
}
\arguments{
\item{job}{A \code{parade_script_job} object}
}
\value{
Named list with job metrics and resource usage
}
\description{
Retrieves current resource usage statistics from SLURM commands
including CPU utilization, memory consumption, and job status.
}
\details{
This function queries SLURM's accounting system to retrieve job metrics:

\strong{Data Sources:}
\itemize{
\item Uses \code{sacct} for historical/completed job metrics
\item Uses \code{sstat} for live metrics of running jobs
\item Falls back to \code{squeue} when accounting is unavailable
}

\strong{Metrics Returned:}
\itemize{
\item \code{cpu_pct}: CPU utilization percentage
\item \code{ave_rss}, \code{max_rss}: Average/maximum resident set size (bytes)
\item \code{ncpus}/\code{alloc_cpus}: Number of allocated CPUs
\item \code{elapsed}: Elapsed time in seconds
\item \code{node}: Node list where job is running
\item \code{state}: Current job state (RUNNING, COMPLETED, FAILED, etc.)
}

\strong{Prerequisites:}
\itemize{
\item SLURM commands (\code{sacct}, \code{sstat}, \code{squeue}) must be available in PATH
\item SLURM accounting must be enabled for detailed metrics
}

\strong{Failure Behavior:}
\itemize{
\item Returns NA for unavailable metrics (never errors)
\item Warns once if SLURM commands are missing
\item Degrades gracefully when accounting is disabled
}
}
\examples{
\donttest{
job <- submit_slurm("script.R")
metrics <- script_metrics(job)
# Returns list with: cpu_pct, ave_rss, max_rss, elapsed, state, etc.
}
}
